<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create your Monster - Spanish Class</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;600&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f0fdf4;
        }
        h1, h2 {
            font-family: 'Fredoka One', cursive;
        }
        .monster-container {
            filter: drop-shadow(0 10px 8px rgb(0 0 0 / 0.1));
        }
        .correct { border-color: #22c55e !important; background-color: #f0fdf4; }
        .incorrect { border-color: #ef4444 !important; background-color: #fef2f2; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl text-green-600 mb-2">¬°Crea tu Monstruo!</h1>
            <p class="text-gray-600">Design your creature and practice your Spanish vocabulary.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Left: Monster Creation -->
            <div class="bg-white p-6 rounded-3xl shadow-xl border-4 border-green-100">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl text-green-700">1. Design</h2>
                    <button onclick="randomizeMonster()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-full transition transform active:scale-95 text-sm font-bold">
                        üé≤ Randomize
                    </button>
                </div>

                <!-- Monster Canvas -->
                <div class="monster-container bg-slate-50 rounded-2xl p-4 flex justify-center items-center h-96 mb-6 border-2 border-dashed border-slate-200">
                    <svg id="monster-svg" viewBox="0 0 200 200" width="100%" height="100%">
                        <!-- Limbs Layer (behind body) -->
                        <g id="monster-limbs"></g>
                        <!-- Head/Body -->
                        <g id="monster-body"></g>
                        <!-- Eyes -->
                        <g id="monster-eyes"></g>
                        <!-- Mouth -->
                        <path id="monster-mouth" d="M 80 140 Q 100 160 120 140" stroke="black" stroke-width="3" fill="none" stroke-linecap="round" />
                    </svg>
                </div>

                <!-- Controls -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Body Color (Color)</label>
                            <div class="flex gap-2 flex-wrap">
                                <button onclick="updateAttr('color', '#ef4444')" class="w-8 h-8 rounded-full bg-red-500 border-2 border-transparent focus:border-black"></button>
                                <button onclick="updateAttr('color', '#3b82f6')" class="w-8 h-8 rounded-full bg-blue-500 border-2 border-transparent focus:border-black"></button>
                                <button onclick="updateAttr('color', '#22c55e')" class="w-8 h-8 rounded-full bg-green-500 border-2 border-transparent focus:border-black"></button>
                                <button onclick="updateAttr('color', '#eab308')" class="w-8 h-8 rounded-full bg-yellow-500 border-2 border-transparent focus:border-black"></button>
                                <button onclick="updateAttr('color', '#a855f7')" class="w-8 h-8 rounded-full bg-purple-500 border-2 border-transparent focus:border-black"></button>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Shape (Forma)</label>
                            <select onchange="updateAttr('shape', this.value)" id="shape-select" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-green-400 outline-none">
                                <option value="redonda">Redonda (Round)</option>
                                <option value="cuadrada">Cuadrada (Square)</option>
                                <option value="triangular">Triangular (Triangular)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Body Size (Tama√±o)</label>
                            <select onchange="updateAttr('size', this.value)" id="size-select" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-green-400 outline-none">
                                <option value="grande">Grande (Big)</option>
                                <option value="peque√±a">Peque√±a (Small)</option>
                            </select>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Eyes (Ojos): <span id="eye-val" class="text-green-600">1</span></label>
                            <input type="range" min="1" max="5" value="1" step="1" oninput="updateAttr('eyes', this.value)" class="w-full accent-green-600">
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Arms (Brazos): <span id="arm-val" class="text-green-600">0</span></label>
                            <input type="range" min="0" max="4" value="0" step="1" oninput="updateAttr('arms', this.value)" class="w-full accent-green-600">
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Legs (Piernas): <span id="leg-val" class="text-green-600">0</span></label>
                            <input type="range" min="0" max="4" value="0" step="1" oninput="updateAttr('legs', this.value)" class="w-full accent-green-600">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: Quiz Section -->
            <div class="bg-white p-6 rounded-3xl shadow-xl border-4 border-blue-100 flex flex-col">
                <h2 class="text-2xl text-blue-700 mb-6">2. Quiz</h2>
                
                <div id="quiz-container" class="space-y-4 flex-grow overflow-y-auto pr-2" style="max-height: 500px;">
                    <p class="text-gray-600 italic">Complete the sentences in Spanish:</p>
                    
                    <div class="space-y-3">
                        <div class="quiz-item">
                            <p class="text-sm font-bold">1. El monstruo es de color:</p>
                            <input type="text" id="ans-color" placeholder="Spanish color..." class="w-full p-2 border-2 rounded-lg outline-none transition duration-200">
                        </div>

                        <div class="quiz-item">
                            <p class="text-sm font-bold">2. La forma es:</p>
                            <input type="text" id="ans-shape" placeholder="Spanish shape..." class="w-full p-2 border-2 rounded-lg outline-none transition duration-200">
                        </div>

                        <div class="quiz-item">
                            <p class="text-sm font-bold">3. El tama√±o es:</p>
                            <input type="text" id="ans-size" placeholder="Spanish size..." class="w-full p-2 border-2 rounded-lg outline-none transition duration-200">
                        </div>

                        <div class="quiz-item">
                            <p class="text-sm font-bold">4. Tiene <span class="text-blue-500">_____</span> ojos:</p>
                            <input type="text" id="ans-eyes" placeholder="Number in Spanish..." class="w-full p-2 border-2 rounded-lg outline-none transition duration-200">
                        </div>

                        <div class="quiz-item">
                            <p class="text-sm font-bold">5. Tiene <span class="text-blue-500">_____</span> brazos:</p>
                            <input type="text" id="ans-arms" placeholder="Number in Spanish..." class="w-full p-2 border-2 rounded-lg outline-none transition duration-200">
                        </div>

                        <div class="quiz-item">
                            <p class="text-sm font-bold">6. Tiene <span class="text-blue-500">_____</span> piernas:</p>
                            <input type="text" id="ans-legs" placeholder="Number in Spanish..." class="w-full p-2 border-2 rounded-lg outline-none transition duration-200">
                        </div>
                    </div>

                    <div class="pt-4 space-y-3">
                        <div class="flex flex-col sm:flex-row gap-2">
                            <button onclick="checkQuiz()" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition shadow-lg active:transform active:scale-95">
                                Check Answers
                            </button>
                            <button onclick="resetQuiz()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 rounded-xl transition shadow-lg active:transform active:scale-95">
                                Reset Quiz
                            </button>
                        </div>
                        <div id="feedback-box" class="hidden p-4 rounded-xl text-center font-bold"></div>
                    </div>
                </div>

                <!-- Vocabulary Helper -->
                <div class="mt-6 p-4 bg-blue-50 rounded-2xl border border-blue-100">
                    <h3 class="text-blue-800 font-bold mb-2 text-sm">Vocabulary Help:</h3>
                    <div class="grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-blue-600">
                        <div><strong>Colors:</strong> rojo, azul, verde, amarillo, morado</div>
                        <div><strong>Shapes:</strong> redonda, cuadrada, triangular</div>
                        <div><strong>Sizes:</strong> grande, peque√±a</div>
                        <div><strong>Numbers:</strong> cero, uno, dos, tres, cuatro, cinco</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State
        const monster = {
            color: '#ef4444',
            shape: 'redonda',
            size: 'grande',
            eyes: 1,
            arms: 0,
            legs: 0
        };

        const colorMap = {
            '#ef4444': 'rojo',
            '#3b82f6': 'azul',
            '#22c55e': 'verde',
            '#eab308': 'amarillo',
            '#a855f7': 'morado'
        };

        const numberMap = {
            '0': 'cero',
            '1': 'uno',
            '2': 'dos',
            '3': 'tres',
            '4': 'cuatro',
            '5': 'cinco'
        };

        window.onload = () => {
            renderMonster();
        };

        function updateAttr(key, value) {
            monster[key] = value;
            if (key === 'eyes') document.getElementById('eye-val').innerText = value;
            if (key === 'arms') document.getElementById('arm-val').innerText = value;
            if (key === 'legs') document.getElementById('leg-val').innerText = value;
            if (key === 'shape') document.getElementById('shape-select').value = value;
            if (key === 'size') document.getElementById('size-select').value = value;
            
            // On design change, we hide the previous feedback
            document.getElementById('feedback-box').classList.add('hidden');
            renderMonster();
        }

        function randomizeMonster() {
            const colors = Object.keys(colorMap);
            const shapes = ['redonda', 'cuadrada', 'triangular'];
            const sizes = ['grande', 'peque√±a'];
            
            monster.color = colors[Math.floor(Math.random() * colors.length)];
            monster.shape = shapes[Math.floor(Math.random() * shapes.length)];
            monster.size = sizes[Math.floor(Math.random() * sizes.length)];
            monster.eyes = Math.floor(Math.random() * 5) + 1;
            monster.arms = Math.floor(Math.random() * 5);
            monster.legs = Math.floor(Math.random() * 5);
            
            // Update UI
            document.getElementById('shape-select').value = monster.shape;
            document.getElementById('size-select').value = monster.size;
            document.getElementById('eye-val').innerText = monster.eyes;
            document.getElementById('arm-val').innerText = monster.arms;
            document.getElementById('leg-val').innerText = monster.legs;
            
            // Range inputs
            const ranges = document.querySelectorAll('input[type="range"]');
            ranges[0].value = monster.eyes;
            ranges[1].value = monster.arms;
            ranges[2].value = monster.legs;
            
            resetQuiz(); // Automatically clear the quiz when a new random monster is generated
            renderMonster();
        }

        function renderMonster() {
            const bodyG = document.getElementById('monster-body');
            const eyesG = document.getElementById('monster-eyes');
            const limbsG = document.getElementById('monster-limbs');
            const mouth = document.getElementById('monster-mouth');
            
            bodyG.innerHTML = '';
            eyesG.innerHTML = '';
            limbsG.innerHTML = '';

            const scale = monster.size === 'grande' ? 1.0 : 0.6;
            const bodyRadius = 70 * scale;
            const center = 100;

            // Draw Limbs
            const armCount = parseInt(monster.arms);
            const legCount = parseInt(monster.legs);

            // Legs
            const legWidth = 15 * scale;
            const legHeight = 40 * scale;
            const legY = center + (bodyRadius * 0.7);
            
            for(let i=0; i < legCount; i++) {
                let x;
                if (legCount === 1) x = center;
                else x = center - (30 * scale) + (i * (60 * scale) / (legCount - 1));
                
                limbsG.innerHTML += `<rect x="${x - legWidth/2}" y="${legY}" width="${legWidth}" height="${legHeight}" rx="${legWidth/2}" fill="${monster.color}" stroke="#333" stroke-width="3" />`;
            }

            // Arms
            const armWidth = 40 * scale;
            const armHeight = 12 * scale;
            for(let i=0; i < armCount; i++) {
                const side = i % 2 === 0 ? -1 : 1;
                const level = Math.floor(i / 2);
                const x = center + (side * bodyRadius * 0.85);
                const y = center - (20 * scale) + (level * 30 * scale);
                const rotation = side === -1 ? -20 : 20;
                
                limbsG.innerHTML += `<rect x="${side === -1 ? x - armWidth : x}" y="${y}" width="${armWidth}" height="${armHeight}" rx="${armHeight/2}" fill="${monster.color}" stroke="#333" stroke-width="3" transform="rotate(${rotation}, ${x}, ${y})" />`;
            }

            // Draw Body
            if (monster.shape === 'redonda') {
                bodyG.innerHTML = `<circle cx="${center}" cy="${center}" r="${bodyRadius}" fill="${monster.color}" stroke="#333" stroke-width="4" />`;
            } else if (monster.shape === 'cuadrada') {
                const side = bodyRadius * 1.8;
                bodyG.innerHTML = `<rect x="${center - side/2}" y="${center - side/2}" width="${side}" height="${side}" rx="15" fill="${monster.color}" stroke="#333" stroke-width="4" />`;
            } else if (monster.shape === 'triangular') {
                const h = bodyRadius * 2.2;
                const pts = `${center},${center - h/2} ${center - h/2},${center + h/2} ${center + h/2},${center + h/2}`;
                bodyG.innerHTML = `<polygon points="${pts}" fill="${monster.color}" stroke="#333" stroke-width="4" />`;
            }

            // Draw Eyes
            const eyeCount = parseInt(monster.eyes);
            const eyePositions = getEyePositions(eyeCount, scale);
            eyePositions.forEach(pos => {
                eyesG.innerHTML += `
                    <g transform="translate(${pos.x}, ${pos.y})">
                        <circle cx="0" cy="0" r="${14 * scale}" fill="white" stroke="#333" stroke-width="2" />
                        <circle cx="0" cy="0" r="${6 * scale}" fill="black" />
                    </g>
                `;
            });

            // Mouth
            const mouthY = center + (30 * scale);
            const mouthW = 20 * scale;
            mouth.setAttribute('d', `M ${center - mouthW} ${mouthY} Q ${center} ${mouthY + (15*scale)} ${center + mouthW} ${mouthY}`);
        }

        function getEyePositions(count, scale) {
            const center = 100;
            const spread = 35 * scale;
            if (count === 1) return [{x: center, y: center - (10 * scale)}];
            if (count === 2) return [{x: center - spread/1.5, y: center - 10}, {x: center + spread/1.5, y: center - 10}];
            if (count === 3) return [{x: center, y: center - 30*scale}, {x: center - spread, y: center}, {x: center + spread, y: center}];
            if (count === 4) return [{x: center - spread, y: center - 30*scale}, {x: center + spread, y: center - 30*scale}, {x: center - spread, y: center + 10*scale}, {x: center + spread, y: center + 10*scale}];
            return [
                {x: center, y: center - 40*scale}, 
                {x: center - spread, y: center - 15*scale}, 
                {x: center + spread, y: center - 15*scale},
                {x: center - 25*scale, y: center + 25*scale},
                {x: center + 25*scale, y: center + 25*scale}
            ];
        }

        function checkQuiz() {
            const keys = ['color', 'shape', 'size', 'eyes', 'arms', 'legs'];
            let score = 0;
            
            const expected = {
                color: colorMap[monster.color],
                shape: monster.shape,
                size: monster.size,
                eyes: numberMap[monster.eyes],
                arms: numberMap[monster.arms],
                legs: numberMap[monster.legs]
            };

            keys.forEach(key => {
                const input = document.getElementById(`ans-${key}`);
                const userVal = input.value.toLowerCase().trim();
                if (userVal === expected[key]) {
                    input.classList.add('correct');
                    input.classList.remove('incorrect');
                    score++;
                } else {
                    input.classList.add('incorrect');
                    input.classList.remove('correct');
                }
            });

            const feedback = document.getElementById('feedback-box');
            feedback.classList.remove('hidden', 'bg-green-100', 'bg-yellow-100', 'text-green-700', 'text-yellow-700');
            
            if (score === keys.length) {
                feedback.innerText = "¬°Excelente! Perfecto. ‚ú®";
                feedback.classList.add('bg-green-100', 'text-green-700');
            } else {
                feedback.innerText = `You got ${score} of ${keys.length} correct. Try again!`;
                feedback.classList.add('bg-yellow-100', 'text-yellow-700');
            }
        }

        function resetQuiz() {
            const keys = ['color', 'shape', 'size', 'eyes', 'arms', 'legs'];
            keys.forEach(key => {
                const input = document.getElementById(`ans-${key}`);
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            });
            const feedback = document.getElementById('feedback-box');
            feedback.classList.add('hidden');
        }
    </script>
</body>
</html>
